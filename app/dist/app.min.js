window.app=function(){"use strict";function a(c,d){"function"===$.type(c)?c(a):"string"===$.type(c)&&"function"===$.type(d)&&(b[c]=d(a))}var b={};return a.el=$("#app"),a.tpl=function(a){return window.compiledModuleTemplates[a]},a.get=function(a){return b[a]},$.observable(a)}();var compiledModuleTemplates={};compiledModuleTemplates["main-view/main-view.tpl"]='<div class="exercise-view">\n    <h1>{heading}</h1>\n    <p>{content}</p>\n</div>',compiledModuleTemplates["menu/menu-item.tpl"]='<a href="#/{href}">\n    <strong>{name}</strong>\n</a>\n',compiledModuleTemplates["menu/menu.tpl"]='<div class="menu">\n  <h2 class="menu-header">Menu</h2>\n  <ul></ul>\n</div>\n',app("shared.data.api",function(){"use strict";app.on("start",function(){var a="data.json",b=app.get("shared.data.model");$.route(function(c){$.get(a,function(a){var d=new b(JSON.parse(a).articles[c.slice(2)]);app.trigger("currentExercise:changed",d)})}),$.get(a,function(a){JSON.parse(a).excerpts.forEach(function(a){app.trigger("exerciseExcerpt:added",new b(a))})})})}),app("shared.data.model",function(){"use strict";function a(a){$.extend(this,a),$.observable(this)}return a}),app("shared.data.view-model",function(){"use strict";function a(a,b){return function(){b.apply(a,Array.prototype.slice.call(arguments,0))}}function b(b,c){this.model=b,this.tpl=app.tpl(c),this.model.on("changed",a(this,this.render)),this.model.on("removed",a(this,function(){this.el.remove()})),this.render()}return b.prototype.render=function(){this.el=$($.render(this.tpl,this.model))},b}),app(function(a){"use strict";function b(b){var c=$($.render(a.tpl("main-view/main-view.tpl"),b));return c}var c=a.el.find(".module-main-view"),d={heading:"Välj till vänster"};a.on("currentExercise:changed",function(a){c.html(b(a||d))})}),app(function(a){"use strict";var b,c=$(a.tpl("menu/menu.tpl")),d=a.get("shared.data.view-model");a.on("exerciseExcerpt:added",function(a){b=new d(a,"menu/menu-item.tpl"),b.el.appendTo(c).wrap("<li/>")}),a.el.find(".module-menu").append(c)});